<template>
  <div class="preloader" :class="{ 'preloader--loaded': isLoaded }">
    <div class="preloader__content">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="350" height="70" viewBox="0 0 350 70">
        <path d="M-189.24-42.294h10.83V0h-10.83Zm31.008,10.887q7.7,0,11.742,3.506t4.047,10.744V0h-10.089V-3.99q-2.337,4.5-9.12,4.5a14.272,14.272,0,0,1-6.213-1.254,9.209,9.209,0,0,1-3.962-3.391,8.985,8.985,0,0,1-1.339-4.874,7.908,7.908,0,0,1,3.363-6.811q3.363-2.422,10.374-2.422h6.156q-.285-4.9-6.555-4.9a15.038,15.038,0,0,0-4.5.712,12,12,0,0,0-3.876,1.967l-3.648-7.353a20.206,20.206,0,0,1,6.242-2.65A29.677,29.677,0,0,1-158.232-31.407Zm-.4,25.08a6,6,0,0,0,3.306-.912,5.077,5.077,0,0,0,2.052-2.679V-12.6h-4.674q-4.731,0-4.731,3.135a2.758,2.758,0,0,0,1.083,2.28A4.662,4.662,0,0,0-158.631-6.327Zm34.257,6.84a33.3,33.3,0,0,1-7.638-.883,20.175,20.175,0,0,1-6.042-2.308l3.249-7.41a18.353,18.353,0,0,0,5.016,2.08,22.427,22.427,0,0,0,5.757.769A9.221,9.221,0,0,0-120.3-7.78a1.7,1.7,0,0,0,1.111-1.568q0-1.026-1.34-1.453a27.725,27.725,0,0,0-4.246-.826,41.942,41.942,0,0,1-6.3-1.2,9.721,9.721,0,0,1-4.475-2.736,7.823,7.823,0,0,1-1.881-5.586,8.443,8.443,0,0,1,1.767-5.273,11.718,11.718,0,0,1,5.159-3.648,22.1,22.1,0,0,1,8.122-1.34,32.831,32.831,0,0,1,6.669.684,19.168,19.168,0,0,1,5.529,1.938l-3.249,7.353a18.011,18.011,0,0,0-8.892-2.28,8.863,8.863,0,0,0-3.762.6,1.784,1.784,0,0,0-1.2,1.568q0,1.083,1.311,1.51a30.062,30.062,0,0,0,4.332.883,47.765,47.765,0,0,1,6.327,1.311,9.67,9.67,0,0,1,4.361,2.707,7.707,7.707,0,0,1,1.853,5.5,8.36,8.36,0,0,1-1.767,5.216A11.51,11.51,0,0,1-116.08-.8,23.376,23.376,0,0,1-124.374.513ZM-84.3-31.407a12.7,12.7,0,0,1,9.262,3.42q3.506,3.42,3.506,10.317V0h-10.83V-15.9q0-6.327-5.073-6.327a5.794,5.794,0,0,0-4.474,1.824,7.829,7.829,0,0,0-1.682,5.472V0h-10.83V-42.294h10.83v14.25a11.842,11.842,0,0,1,4.161-2.508A15.141,15.141,0,0,1-84.3-31.407ZM-32.718-15.39q0,.114-.171,2.679H-55.347A6.286,6.286,0,0,0-52.7-9.035a8.85,8.85,0,0,0,4.931,1.282,10.674,10.674,0,0,0,3.847-.627,11.352,11.352,0,0,0,3.278-2.052l5.7,5.928Q-39.444.513-48.108.513a21.021,21.021,0,0,1-9.519-2.052,15.325,15.325,0,0,1-6.355-5.7A15.415,15.415,0,0,1-66.234-15.5a15.464,15.464,0,0,1,2.194-8.179,15.333,15.333,0,0,1,6.071-5.672,18.348,18.348,0,0,1,8.721-2.052,18.244,18.244,0,0,1,8.379,1.91,14.527,14.527,0,0,1,5.957,5.529A16.229,16.229,0,0,1-32.718-15.39Zm-16.473-8.322a6.256,6.256,0,0,0-4.189,1.425,6.434,6.434,0,0,0-2.138,3.876h12.654A6.434,6.434,0,0,0-45-22.287,6.256,6.256,0,0,0-49.191-23.712ZM-16.473.513A33.3,33.3,0,0,1-24.111-.37a20.175,20.175,0,0,1-6.042-2.308l3.249-7.41a18.353,18.353,0,0,0,5.016,2.08,22.427,22.427,0,0,0,5.757.769A9.221,9.221,0,0,0-12.4-7.78a1.7,1.7,0,0,0,1.111-1.568q0-1.026-1.339-1.453a27.725,27.725,0,0,0-4.247-.826,41.942,41.942,0,0,1-6.3-1.2,9.721,9.721,0,0,1-4.474-2.736,7.823,7.823,0,0,1-1.881-5.586,8.443,8.443,0,0,1,1.767-5.273A11.718,11.718,0,0,1-22.6-30.067a22.1,22.1,0,0,1,8.123-1.34,32.831,32.831,0,0,1,6.669.684A19.168,19.168,0,0,1-2.28-28.785l-3.249,7.353a18.011,18.011,0,0,0-8.892-2.28,8.863,8.863,0,0,0-3.762.6,1.784,1.784,0,0,0-1.2,1.568q0,1.083,1.311,1.51a30.062,30.062,0,0,0,4.332.883A47.766,47.766,0,0,1-7.41-17.841,9.67,9.67,0,0,1-3.05-15.134,7.707,7.707,0,0,1-1.2-9.633,8.36,8.36,0,0,1-2.964-4.418,11.51,11.51,0,0,1-8.18-.8,23.376,23.376,0,0,1-16.473.513Z" transform="translate(345 50)" fill="#b7f8f8"/>
        <path d="M1.938,0,3.591-20.634q.171-2.109.228-4.19t-.057-4.133h9.747l.171,5.472L12.939-24.8a11.65,11.65,0,0,1,9.8-4.959,9.061,9.061,0,0,1,6.27,2.138,8.822,8.822,0,0,1,2.793,5.9l-1.368-2.736a12.964,12.964,0,0,1,4.589-3.962,12.52,12.52,0,0,1,5.728-1.34q4.959,0,7.382,3.249T50.1-17.1L48.735,0H38.418l1.311-16.872a5.77,5.77,0,0,0-.57-3.619,2.849,2.849,0,0,0-2.622-1.283,4.049,4.049,0,0,0-3.306,1.454,9.02,9.02,0,0,0-1.539,4.759L30.552,0H20.121l1.368-16.7a6.592,6.592,0,0,0-.6-3.79,2.838,2.838,0,0,0-2.65-1.283,4.049,4.049,0,0,0-3.306,1.454,8.454,8.454,0,0,0-1.425,4.759L12.255,0ZM66.861.456A12.406,12.406,0,0,1,60.42-1.2a11.247,11.247,0,0,1-4.361-4.788,16.525,16.525,0,0,1-1.568-7.467,19.4,19.4,0,0,1,1.739-8.436A14.061,14.061,0,0,1,61.1-27.645a12.76,12.76,0,0,1,7.3-2.109,10.987,10.987,0,0,1,5.329,1.226,10.15,10.15,0,0,1,3.676,3.392l-.57,1.653.456-5.472H87.438L85.158,0h-10.2l.456-5.3.684.741a9.409,9.409,0,0,1-2.223,2.679A9.714,9.714,0,0,1,70.737-.142,12.017,12.017,0,0,1,66.861.456Zm3.591-7.638a4.886,4.886,0,0,0,4.161-2.109,9.161,9.161,0,0,0,1.539-5.529q0-3.648-1.453-5.415A4.983,4.983,0,0,0,70.623-22a5.121,5.121,0,0,0-4.332,2.138,9.356,9.356,0,0,0-1.6,5.729,7.807,7.807,0,0,0,1.51,5.158A5.244,5.244,0,0,0,70.452-7.182ZM91.314,0l1.653-20.634q.114-2.052.2-4.161t-.028-4.161h9.747l.285,7.809-.855-1.881a8.221,8.221,0,0,1,3.591-4.845,10.813,10.813,0,0,1,5.985-1.767,9.734,9.734,0,0,1,1.853.171,5.709,5.709,0,0,1,1.453.456l-.684,9.405a12.068,12.068,0,0,0-2.394-.855,10.3,10.3,0,0,0-2.394-.285,9.722,9.722,0,0,0-3.449.57,4.8,4.8,0,0,0-2.394,1.938,8.3,8.3,0,0,0-1.112,3.7L101.631,0ZM127,2.451,115.71-28.956h10.431l6.327,19.038ZM116.85,13l-1.767-7.809a25.98,25.98,0,0,0,4.532-1.311,9.759,9.759,0,0,0,2.936-1.8A10.012,10.012,0,0,0,124.488-.4l1.71-3.135,4.161-6.384,9.177-19.038H149.91l-15.9,29.982a24.705,24.705,0,0,1-4.76,6.612,18.262,18.262,0,0,1-5.671,3.705A24.927,24.927,0,0,1,116.85,13Z" transform="translate(5 50)" fill="#0d0d0d"/>
      </svg>
    </div>
    <div class="preloader__point"></div>
    <script>
      window.is_loaded = new Promise(function(resolve) {
        setTimeout(function() {
          resolve();
        }, 2200);
      });
    </script>
  </div>
</template>

<script>
  export default {
    data: () => ({
      isLoaded: false,
    }),

    mounted() {
      window.is_loaded.then(() => {
        this.isLoaded = true;
        window.is_loaded = null;
      });
    }
  }
</script>

<style lang="scss" scoped>
$logo-ratio: 350/70;
$logo-width: 500;
$logo-height: $logo-width / $logo-ratio;

$point-half: ($logo-width / 2) * 1.25;
$point-size: $logo-height / 1.2;
$point-coord-end-x: $point-half - (($point-half - ($logo-width / 2)) * 0.9);
$point-coord-end-y: $logo-height * 0.13;
$point-end-scale: ($logo-height / 100) * 0.2;

.preloader {
  $b: #{&};

  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: $color-white;
  z-index: $z-index-preloader;

  &__content,
  &__point,
  &__point::after {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    margin: auto;
  }

  &__content {
    width: rem($logo-width);
    height: rem($logo-height);
    animation: content-start .3s 1.32s ease forwards;
    opacity: 0;

    svg {
      height: 100%;
      width: 100%;
    }
  }

  &__point {
    width: rem($point-size);
    height: rem($point-size);
    animation: point-start 2s forwards;

    &::after {
      content: '';
      background-color: $color-saphire;
      border-radius: 50%;
      animation: point-circle-start 2s linear forwards;
    }
  }

  &--loaded {
    transition: transform 0.6s 1s ease;
    transform: translateX(100%);

    #{$b}__point {
      animation: point-end 2s forwards;

      &::after {
        animation: point-circle-end 2s forwards;
      }
    }

    #{$b}__content {
      opacity: 1;
      animation: content-end .3s 0.4s forwards;
    }
  }
}

@keyframes point-start {
  15%,
  20% {
    transform: translateX(#{rem($point-half)});
    animation-timing-function: ease;
  }
  50%,
  55% {
    transform: translateX(#{rem(-$point-half)});
    animation-timing-function: ease;
  }
  85%,
  90% {
    transform: translateX(#{rem($point-half)});
    animation-timing-function: ease;
  }
  100% {
    transform: translate(#{rem($point-coord-end-x)}, #{rem($point-coord-end-y)});
  }
}

@keyframes point-end {
  0% {
    transform: translate(#{rem($point-coord-end-x)}, #{rem($point-coord-end-y)});
  }
  15%,
  20% {
    transform: translateX(#{rem($point-half)});
    animation-timing-function: ease;
  }
  50%,
  55% {
    transform: translateX(#{rem(-$point-half)});
    animation-timing-function: ease;
  }
  85%,
  100% {
    transform: translateX(#{rem($point-half)});
    animation-timing-function: ease;
  }
}

@keyframes point-circle-start {
  0% {
    transform: scale(0);
  }
  14%,
  91% {
    transform: scale(1);
    animation-timing-function: ease;
  }
  100% {
    transform: scale($point-end-scale);
  }
}

@keyframes point-circle-end {
  0% {
    transform: scale($point-end-scale);
  }
  15%,
  54.9% {
    transform: scale(1);
    animation-timing-function: ease;
  }
  55%,
  100% {
    transform: scale(2);
  }
}

@keyframes content-start {
  from {
    opacity: 0;
    transform-origin: right;
    transform: translateX(#{rem(-100)}) scaleX(1.05);
  }
  to {
    opacity: 1;
    transform: none;
  }
}

@keyframes content-end {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}
</style>
